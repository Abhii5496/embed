!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Embed=t():e.Embed=t()}(window,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){"use strict";var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,d=e[Symbol.iterator]();!(i=(a=d.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();var o=r(1),a=function(){function e(t){var r=t.data,i=t.api;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=i,this._data={},this.element=null,this.data=r}return n(e,[{key:"render",value:function(){var t=e.services[this.data.key].html,r=document.createElement("div"),i=document.createElement("div"),n=document.createElement("template");return i.contentEditable=!0,i.classList.add(this.api.styles.input),i.dataset.placeholder="Enter a caption",i.innerHTML=this.data.caption,n.innerHTML=t,n.content.firstChild.setAttribute("src",this.data.embed),n.content.firstChild.classList.add(this.api.styles.block),r.appendChild(n.content.firstChild),r.appendChild(i),this.element=r,r}},{key:"save",value:function(){var e=this.element.querySelector("."+this.api.styles.input);return this.data={caption:e.innerHTML},this.data}},{key:"data",set:function(e){if(!e instanceof Object)throw Error("Embed Tool data should be object");var t=e.key,r=e.source,i=e.embed,n=e.width,o=e.height,a=e.caption;this._data={key:this.data.key||t,source:this.data.source||r,embed:this.data.embed||i,width:this.data.width||n,height:this.data.height||o,caption:this.data.caption||a}},get:function(){return this._data}}],[{key:"pasteHandler",value:function(t,r){var i=e.services[r],n=i.regex,o=i.embedUrl,a=i.width,d=i.height,l=i.id,h=void 0===l?function(e){return e.shift()}:l,c=n.exec(t).slice(1);return{key:r,source:t,embed:o.replace(/<\%\= remote\_id \%\>/g,h(c)),width:a,height:d}}},{key:"prepare",value:function(t){var r=t.config,n=r.services,a=void 0===n?{}:n,d=r.whitelist,l=void 0===d?[]:d,h=r.blacklist,c=void 0===h?[]:h,s=Object.entries(o);s.concat(Object.entries(a).filter(function(t){var r=i(t,2),n=(r[0],r[1]);return e.checkServiceConfig(n)}).map(function(e){var t=i(e,2),r=t[0],n=t[1];return[r,{regex:n.regex,embedUrl:n.embedUrl,html:n.html,height:n.height,width:n.width,id:n.id}]})),l instanceof Array&&l.length&&(s=s.filter(function(e){var t=i(e,1)[0];return l.includes(t)})),c instanceof Array&&c.length&&(s=s.filter(function(e){var t=i(e,1)[0];return!c.includes(t)})),e.services=s.reduce(function(e,t){var r=i(t,2),n=r[0],o=r[1];return n in e?(e[n]=Object.assign({},e[n],o),e):(e[n]=o,e)},{}),e.patterns=s.reduce(function(e,t){var r=i(t,2),n=r[0],o=r[1];return e[n]=o.regex,e},{})}},{key:"checkServiceConfig",value:function(e){var t=e.regex,r=e.embedUrl,i=e.html,n=e.height,o=e.width,a=e.id,d=t&&t instanceof RegExp&&r&&r instanceof String&&i&&i instanceof String;return d=(d=(d=d&&(void 0===a||a instanceof Function))&&(void 0===n||Number.isFinite(n)))&&(void 0===o||Number.isFinite(o))}},{key:"onPaste",get:function(){return{patterns:e.patterns,patternHandler:e.pasteHandler}}}]),e}();e.exports=a},function(e,t,r){"use strict";e.exports={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:320,width:580},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)(?:[\?\&]t\=(\d*)|)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},coub:{regex:/https?:\/\/coub\.com\/view\/([^\/\?\&]+)/,embedUrl:"https://coub.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},vine:{regex:/https?:\/\/vine\.co\/v\/([^\/\?\&]+)/,embedUrl:"https://vine.co/v/<%= remote_id %>/embed/simple/",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},imgur:{regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},gfycat:{regex:/https?:\/\/gfycat\.com(?:\/detail)?\/([a-zA-Z]+)/,embedUrl:"https://gfycat.com/ifr/<%= remote_id %>",html:"<iframe frameborder='0' scrolling='no' style=\"width:100%;\" height='436' allowfullscreen ></iframe>",height:436,width:580},"twitch-channel":{regex:/https?:\/\/www.twitch.tv\/([^\/\?\&]*)/,embedUrl:"https://player.twitch.tv/?channel=<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"twitch-video":{regex:/https?:\/\/www.twitch.tv\/(?:[^\/\?\&]*\/v|videos)\/([0-9]*)/,embedUrl:"https://player.twitch.tv/?video=v<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"yandex-music-album":{regex:/https?:\/\/music.yandex.ru\/album\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#album/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" style="width:100%;" height="400"></iframe>',height:400,width:540},"yandex-music-track":{regex:/https?:\/\/music.yandex.ru\/album\/([0-9]*)\/track\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#track/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:100px;" style="width:100%;" height="100"></iframe>',height:100,width:540,id:function(e){return e.join("/")}},"yandex-music-playlist":{regex:/https?:\/\/music.yandex.ru\/users\/([^\/\?\&]*)\/playlists\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#playlist/<%= remote_id %>/show/cover/description/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" width="540" height="400"></iframe>',height:400,width:540,id:function(e){return e.join("/")}},codepen:{regex:/https?:\/\/codepen.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:function(e){return e.join("/embed/")}}}}])});